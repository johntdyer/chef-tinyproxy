# This file is automagically generated by Chef.
# Local changes will be overwritten!

User <%= node[:tinyproxy][:user] %>
Group <%= node[:tinyproxy][:group] %>

Port <%= node[:tinyproxy][:port] %>
Listen <%= node[:tinyproxy][:listen_address] %>
Timeout <%= node[:tinyproxy][:timeout] %>

DefaultErrorFile "/usr/share/tinyproxy/default.html"
StatFile "/usr/share/tinyproxy/stats.html"

<% if node[:tinyproxy][:logging][:mode] == 'file' %>
LogFile "<%= node[:tinyproxy][:logging][:file] %>"
<% end %>
<% if node[:tinyproxy][:logging][:mode] == 'syslog' %>
Syslog On
<% end %>
LogLevel <%= node[:tinyproxy][:logging][:level] %>

PidFile "<%= node[:tinyproxy][:pid_file] %>"

MaxClients 100
MinSpareServers 5
MaxSpareServers 20
StartServers 10
MaxRequestsPerChild 0

<% node[:tinyproxy][:allow].each do |a| %>
Allow <%= a %>
<% end %>

ViaProxyName "tinyproxy"

DisableViaHeader <%= node[:tinyproxy][:disableviaheader] %>

ConnectPort 443
